# Complete Guide to Forking the Monero Blockchain on Linux Mint

## Table of Contents

1. [Introduction](#introduction)
2. [System Requirements](#system-requirements)
3. [Phase 1: Environment Setup](#phase-1-environment-setup)
4. [Phase 2: Downloading and Preparing Monero Source Code](#phase-2-downloading-and-preparing-monero-source-code)
5. [Phase 3: Modifying the Source Code](#phase-3-modifying-the-source-code)
6. [Phase 4: Configuring the Premine](#phase-4-configuring-the-premine)
7. [Phase 5: Compiling Your Forked Blockchain](#phase-5-compiling-your-forked-blockchain)
8. [Phase 6: Running Your Blockchain](#phase-6-running-your-blockchain)
9. [Phase 7: Claiming the Premine](#phase-7-claiming-the-premine)
10. [Troubleshooting](#troubleshooting)

---

## Introduction

Forking a blockchain means creating a new blockchain based on existing blockchain source code. Monero is an excellent choice for forking because it is open-source and has well-documented code. This guide will walk you through every step of forking Monero into a completely new blockchain on Linux Mint, including configuring a premine (initial coin allocation) and claiming those premined coins.

**Important Notes:**
- This guide is specifically tailored for Linux Mint users
- All commands shown are for Linux Mint (based on Debian/Ubuntu)
- You should have basic Linux command-line knowledge
- This process will take several hours
- Ensure you have at least 20GB of free disk space
- Back up any important data before beginning

---

## System Requirements

### Minimum Hardware Requirements

- **CPU:** Dual-core processor or better
- **RAM:** 4GB minimum (8GB+ recommended for faster compilation)
- **Storage:** 20GB free disk space
- **Internet:** Stable connection for downloading dependencies and source code

### Required Software

- Linux Mint (any recent version, this guide uses Mint 21+)
- Terminal application
- Text editor (nano, vim, or gedit)
- Git
- Build tools (gcc, g++, make, cmake)
- Development libraries

### Network Considerations

- Your fork will initially be isolated (single node)
- You can add peers later to create a network
- For testing, you can run multiple nodes on your local machine

---

## Phase 1: Environment Setup

### Step 1.1: Update Your System

Open a terminal and run the following commands to ensure your system is up-to-date:

```bash
sudo apt update
sudo apt upgrade -y
```

This process may take several minutes. Wait for it to complete before proceeding.

### Step 1.2: Install Essential Build Tools

Install the fundamental tools needed for compilation:

```bash
sudo apt install -y build-essential cmake git pkg-config
```

### Step 1.3: Install Monero-Specific Dependencies

Monero requires several libraries to compile properly. Install them all with this command:

```bash
sudo apt install -y libboost-all-dev miniupnpc libunbound-dev graphviz doxygen libunwind8-dev libssl-dev libzmq3-dev libsodium-dev
```

This command installs:
- **libboost-all-dev:** C++ libraries for various functions
- **miniupnpc:** UPnP library for port mapping
- **libunbound-dev:** DNS library
- **graphviz & doxygen:** Documentation tools
- **libunwind8-dev:** Stack unwinding library
- **libssl-dev:** OpenSSL library for cryptography
- **libzmq3-dev:** Message queue library
- **libsodium-dev:** Cryptography library

### Step 1.4: Verify Installation

Verify that the essential tools are installed correctly:

```bash
gcc --version
g++ --version
cmake --version
git --version
make --version
```

Each command should display a version number. If any command returns "not found," reinstall that tool.

### Step 1.5: Create a Working Directory

Create a dedicated folder for your blockchain fork project:

```bash
mkdir -p ~/blockchain-fork
cd ~/blockchain-fork
```

This directory will contain all the files related to your forked blockchain.

---

## Phase 2: Downloading and Preparing Monero Source Code

### Step 2.1: Clone the Monero Repository

Download the official Monero source code from GitHub:

```bash
git clone https://github.com/monero-project/monero.git
cd monero
```

This creates a `monero` directory and downloads all the source code. This may take a few minutes depending on your internet connection.

### Step 2.2: Checkout the Latest Stable Release

List available releases and checkout the most recent stable version:

```bash
git tag -l | tail -20
```

This shows the latest release tags. Choose a stable release (e.g., `v0.18.3.1`):

```bash
git checkout tags/v0.18.3.1
```

Replace `v0.18.3.1` with the latest stable version available. Checking out a specific tag ensures you have stable, tested code.

### Step 2.3: Initialize Submodules

Monero uses submodules (external dependencies). Initialize them:

```bash
git submodule update --init --recursive
```

This downloads all required dependencies that are stored as Git submodules.

### Step 2.4: Verify the Source Code Structure

Explore the source code structure to understand the codebase:

```bash
ls -la
```

You should see directories like:
- `src/` - Source code files
- `build/` - Where compiled binaries will be placed
- `cmake/` - Build configuration files
- `contrib/` - Additional utilities and scripts
- `tests/` - Test files

Understanding this structure will help you make targeted modifications later.

---

## Phase 3: Modifying the Source Code

### Step 3.1: Understanding What to Modify

When forking a blockchain, you need to change several key parameters:

1. **Blockchain Name:** The human-readable name of your coin
2. **Network Magic Bytes:** Unique identifiers to prevent mixing with Monero
3. **Difficulty Adjustment:** Mining difficulty parameters
4. **Port Numbers:** P2P network ports must be different from Monero
5. **Seed Nodes:** Bootstrap nodes for your network
6. **Genesis Block:** The first block of your blockchain
7. **Currency Name:** The unit name for your coins

### Step 3.2: Modify Network Parameters

Navigate to the configuration file containing network parameters:

```bash
nano src/cryptonote_config.h
```

Find and modify the following parameters:

**Locate this line (usually around line 50-100):**
```cpp
#define CRYPTONOTE_NAME "bitmonero"
```

Change it to your blockchain name:
```cpp
#define CRYPTONOTE_NAME "yourblockchainname"
```

**Locate the GENESIS_TX line and note it (you'll need it later).**

**Find the main network port (usually 18080):**
```cpp
static const int P2P_DEFAULT_PORT = 18080;
```

Change it to an unused port:
```cpp
static const int P2P_DEFAULT_PORT = 19080;
```

**Find the testnet port and change it similarly:**
```cpp
static const int TESTNET_P2P_DEFAULT_PORT = 28080;
```

Change to:
```cpp
static const int TESTNET_P2P_DEFAULT_PORT = 29080;
```

**Find the RPC port (usually 18081):**
```cpp
static const int RPC_DEFAULT_PORT = 18081;
```

Change to:
```cpp
static const int RPC_DEFAULT_PORT = 19081;
```

Save the file with `Ctrl+X`, then press `Y`, then `Enter`.

### Step 3.3: Modify Currency Parameters

Open the currency units file:

```bash
nano src/cryptonote_basic/cryptonote_basic.h
```

Find lines containing currency name constants and modify them:

```cpp
#define CRYPTONOTE_DISPLAY_DECIMAL_POINT 12
#define CRYPTONOTE_COIN_TYPE uint64_t
#define MONEY_SUPPLY ((uint64_t)(-1))
```

The `MONEY_SUPPLY` value determines the maximum coins that can ever exist. For example:
- `-1` (unlimited/maximum value)
- Or specify a specific number: `((uint64_t)(100000000) * COIN)`

Save the file.

### Step 3.4: Modify Network Magic Bytes

These unique identifiers prevent your blockchain from accidentally connecting to Monero:

```bash
nano src/p2p/net_node.h
```

Find the line containing:
```cpp
#define P2P_NET_DATA_VERSION 9
```

Change it to something different:
```cpp
#define P2P_NET_DATA_VERSION 10
```

Also look for network magic numbers and modify them. Find lines like:
```cpp
static const uint64_t MAINNET_MAGIC = 0x0a0b0c0d0e0f0001ULL;
```

Change them to unique values:
```cpp
static const uint64_t MAINNET_MAGIC = 0x1a1b1c1d1e1f0101ULL;
```

Save the file.

### Step 3.5: Update the Blockchain Name in Source Files

Find all instances of "bitmonero" and replace them:

```bash
grep -r "bitmonero" src/ | head -20
```

This shows where "bitmonero" appears. Edit these files to use your blockchain name. For critical files:

```bash
sed -i 's/bitmonero/yourblockchainname/g' src/cryptonote_config.h
sed -i 's/bitmonero/yourblockchainname/g' src/daemon/main.cpp
sed -i 's/bitmonero/yourblockchainname/g' src/wallet/wallet_rpc_server.cpp
```

### Step 3.6: Create Unique Network Identifiers

Each blockchain fork needs unique identifiers. In `src/cryptonote_core/cryptonote_core.cpp`, find and modify seed nodes:

```bash
nano src/cryptonote_core/cryptonote_core.cpp
```

Find the seed nodes section (usually contains IP addresses):
```cpp
add_seed_node("seed.xmr.com:18080");
```

Replace these with nodes you'll set up later, or comment them out for now:
```cpp
// add_seed_node("yourseednode.com:19080");
```

Save the file.

---

## Phase 4: Configuring the Premine

The premine is a controlled amount of coins created at the genesis block that you can claim. This section explains how to configure it.

### Step 4.1: Understanding the Premine

A premine is:
- Coins created in the first block (genesis block)
- Directed to a specific address under your control
- Used to fund development or initial distribution
- Should be clearly documented to maintain community trust

### Step 4.2: Generate Your Premine Wallet Address

First, you need to create a wallet to receive the premine. Compile the wallet first (we'll do full compilation later, but let's create a quick build):

```bash
cd ~/blockchain-fork/monero
mkdir -p build
cd build
cmake ..
make -j$(nproc) monero-wallet-cli
```

This creates the wallet CLI tool. Once complete, run:

```bash
cd ~/blockchain-fork/monero/build/release/bin
./monero-wallet-cli --generate-new-wallet premine-wallet
```

Follow the prompts:
1. Create a strong password
2. Write down your 25-word seed phrase (CRITICAL - keep this safe!)
3. The wallet will display your address

**CRITICAL:** Save this address and seed phrase securely. This is how you'll claim your premine later. Example address format:
```
42ABC123DEF456...GHI789JKL012MNO345PQR678STU901VWX234YZ567ABC890DEF123
```

### Step 4.3: Modify the Genesis Block

Navigate to the genesis block configuration:

```bash
nano ~/blockchain-fork/monero/src/cryptonote_core/cryptonote_core.cpp
```

Find the genesis block creation code. Search for "coinbase" and "genesis":

```bash
grep -n "GENESIS_TX" ~/blockchain-fork/monero/src/cryptonote_core/cryptonote_core.cpp | head -5
```

This shows you the line numbers. Open the file at those locations:

```bash
nano +[line-number] ~/blockchain-fork/monero/src/cryptonote_core/cryptonote_core.cpp
```

Look for the genesis transaction (usually contains cryptonote transaction data). You'll see something like:

```cpp
static const char GENESIS_TX[] = "013c01ff0f01...";
```

This is the encoded genesis transaction. Creating a custom one is complex, but for now, you can keep the default and modify the coinbase destination later, or use a genesis block generation tool.

### Step 4.4: Optional - Use a Genesis Block Generator

For easier premine configuration, use a genesis block generation tool:

```bash
cd ~/blockchain-fork
git clone https://github.com/nasa8x/node-genesis-block.git
cd node-genesis-block
npm install
```

Then generate a genesis block:

```bash
node genesis -a cryptonight -t "Your blockchain started today at this timestamp"
```

This will output premine transaction data and genesis block hashes you can use.

### Step 4.5: Configure Premine Amount

In `src/cryptonote_config.h`, find and modify:

```cpp
#define MONEY_SUPPLY ((uint64_t)(-1))
#define COIN ((uint64_t)1000000000000)
```

The COIN value defines the smallest unit (like Satoshi in Bitcoin). To create a premine of 1,000,000 coins:

```cpp
#define PREMINE_AMOUNT ((uint64_t)(1000000) * COIN)
```

Or modify MONEY_SUPPLY to control total coin supply:

```cpp
#define MONEY_SUPPLY ((uint64_t)(21000000) * COIN)
```

This example limits the total supply to 21,000,000 coins (like Bitcoin).

---

## Phase 5: Compiling Your Forked Blockchain

### Step 5.1: Prepare the Build Directory

Navigate back to your main directory and create a clean build:

```bash
cd ~/blockchain-fork/monero
rm -rf build
mkdir -p build
cd build
```

The `rm -rf build` command removes any previous build files to ensure a clean compilation.

### Step 5.2: Run CMake Configuration

Configure the build with CMake:

```bash
cmake -D BUILD_TESTS=ON -D CMAKE_BUILD_TYPE=release ..
```

This command:
- Sets up the build system
- Enables tests
- Optimizes for release (not debug)
- Uses the parent directory as source

The process will take 1-2 minutes. Watch for any errors.

### Step 5.3: Compile the Source Code

Start the compilation process:

```bash
make -j$(nproc)
```

The `-j$(nproc)` flag uses all available CPU cores for faster compilation. This process will take 10-60 minutes depending on your CPU.

**Progress indicators:**
- You should see `[xx%]` progress markers
- Compilation is normal if you see warnings, but should not have errors
- If compilation stops with an error, note the error message for troubleshooting

### Step 5.4: Verify Successful Compilation

After compilation completes, verify the binaries were created:

```bash
ls -la release/bin/
```

You should see these executable files:
- `monerod` - The blockchain daemon (node)
- `monero-cli` - Command-line interface
- `monero-wallet-cli` - Wallet creation and management
- `monero-wallet-rpc` - Wallet RPC interface
- `monero-blockchain-export` - Blockchain export tool

### Step 5.5: Create Symlinks (Optional but Recommended)

Create easy access to these tools:

```bash
sudo ln -sf ~/blockchain-fork/monero/build/release/bin/monerod /usr/local/bin/yourblockchain-daemon
sudo ln -sf ~/blockchain-fork/monero/build/release/bin/monero-wallet-cli /usr/local/bin/yourblockchain-wallet
sudo ln -sf ~/blockchain-fork/monero/build/release/bin/monero-wallet-rpc /usr/local/bin/yourblockchain-wallet-rpc
```

Now you can run these commands from anywhere in the terminal.

---

## Phase 6: Running Your Blockchain

### Step 6.1: Create a Data Directory

Create a dedicated directory for blockchain data:

```bash
mkdir -p ~/.yourblockchain/data
```

This directory will store the blockchain database and configuration files.

### Step 6.2: Create Configuration File

Create a configuration file for your daemon:

```bash
nano ~/.yourblockchain/config
```

Add the following configuration:

```
# Your Blockchain Configuration
data-dir=/home/YOUR_USERNAME/.yourblockchain/data
log-level=1
log-file=/home/YOUR_USERNAME/.yourblockchain/daemon.log
p2p-bind-port=19080
rpc-bind-port=19081
rpc-bind-ip=127.0.0.1
offline=false
confirm-external-bind=false
out-peers=8
in-peers=8
```

**Important:** Replace `YOUR_USERNAME` with your actual Linux username. Find it with:

```bash
whoami
```

Save the file (Ctrl+X, Y, Enter).

### Step 6.3: Start the Blockchain Daemon

Run your blockchain node for the first time:

```bash
cd ~/blockchain-fork/monero/build/release/bin
./monerod --config-file ~/.yourblockchain/config
```

The daemon will start and begin initializing the genesis block. You should see output like:

```
2024-11-13 15:30:45.123  [DAEMON] Starting Your Blockchain...
2024-11-13 15:30:45.456  [DAEMON] Initializing blockchain...
2024-11-13 15:30:46.789  [P2P] P2P server started on port 19080
```

### Step 6.4: Running the Daemon in Background (Optional)

To run the daemon in the background and close your terminal:

```bash
cd ~/blockchain-fork/monero/build/release/bin
nohup ./monerod --config-file ~/.yourblockchain/config > ~/.yourblockchain/daemon.log 2>&1 &
```

To view logs later:

```bash
tail -f ~/.yourblockchain/daemon.log
```

### Step 6.5: Verify Daemon is Running

In a new terminal, check if the daemon is running:

```bash
ps aux | grep monerod
```

If you see a line with `monerod`, the daemon is running.

### Step 6.6: Connect with the CLI Wallet

In another terminal, create and connect a wallet:

```bash
cd ~/blockchain-fork/monero/build/release/bin
./monero-wallet-cli --daemon-address 127.0.0.1:19081 --wallet-file ~/.yourblockchain/wallet1
```

The wallet will prompt you to:
1. Create a new wallet or restore
2. Set a password
3. Back up your seed phrase

Once in the wallet, you can check the balance and see blockchain sync status.

---

## Phase 7: Claiming the Premine

### Step 7.1: Understanding Premine Claims

The premine coins are created in the genesis block. To claim them:

1. You need the private key of the premine address
2. Create a transaction sending coins from that address to your wallet
3. Broadcast the transaction on your blockchain

### Step 7.2: Import the Premine Wallet

If you created a separate premine wallet earlier, import it:

```bash
cd ~/blockchain-fold/monero/build/release/bin
./monero-wallet-cli --restore-deterministic-wallet --wallet-file ~/.yourblockchain/premine-wallet
```

Enter your 25-word seed phrase when prompted.

### Step 7.3: Check Premine Balance

In the wallet CLI, check your balance:

```
[wallet XXXXX]: balance
```

You should see your premine balance. If it shows 0, the premine hasn't been confirmed yet, or there was an issue with the genesis block configuration.

### Step 7.4: Transfer Premine to Claim Address

Create a transaction to transfer the premine:

```
[wallet XXXXX]: transfer [destination-address] [amount]
```

For example:

```
[wallet XXXXX]: transfer 42ABC123DEF456...GHI789JKL012MNO 500000
```

This creates a transaction for 500,000 coins (adjust based on your premine amount).

### Step 7.5: Verify the Transaction

The wallet will prompt you to confirm. Type `y` to proceed. The transaction will be:
1. Signed with your private key
2. Broadcast to the network
3. Included in the next block

View transaction history:

```
[wallet XXXXX]: show_transfers all
```

### Step 7.6: Wait for Confirmations

In the main wallet, wait for the transaction to be confirmed (usually 1-2 blocks). Check status:

```
[wallet XXXXX]: balance
```

Once confirmed, the premine is officially claimed and in your wallet.

### Step 7.7: Export Your Private Keys (Security)

For maximum security, back up your private spend and view keys:

```
[wallet XXXXX]: export_key_images filename
[wallet XXXXX]: export_outputs filename
```

Store these files securely offline.

---

## Troubleshooting

### Compilation Issues

**Error: "Boost version too old"**

Solution: Update Boost
```bash
sudo apt install -y libboost-all-dev
```

**Error: "CMake not found"**

Solution: Install CMake
```bash
sudo apt install -y cmake
```

**Error: "undefined reference to"**

Solution: Ensure all dependencies are installed
```bash
sudo apt install -y libssl-dev libzmq3-dev libsodium-dev
```

### Runtime Issues

**Error: "Failed to initialize blockchain"**

Solution: Delete data directory and restart
```bash
rm -rf ~/.yourblockchain/data
cd ~/blockchain-fork/monero/build/release/bin
./monerod --config-file ~/.yourblockchain/config
```

**Error: "Connection refused on RPC port"**

Solution: Check the port is correct in config file and daemon is running
```bash
netstat -tlnp | grep monerod
```

**Daemon crashes on startup**

Solution: Check logs for specific errors
```bash
cat ~/.yourblockchain/daemon.log | tail -50
```

### Premine Issues

**Cannot see premine balance**

Solution: Wait longer for blockchain sync, or check genesis block configuration is correct.

**Transaction fails to broadcast**

Solution: Ensure you have premine coins in the wallet and the daemon is running and synced.

---

## Next Steps

Once you have successfully forked the Monero blockchain and claimed your premine, consider:

1. **Setting up seed nodes** for network bootstrap
2. **Creating documentation** for your blockchain
3. **Configuring testnet** for testing new features
4. **Building a web wallet** for easier access
5. **Setting up a block explorer** for transaction viewing
6. **Recruiting miners** to participate in your network
7. **Creating a community** around your blockchain project

---

## Additional Resources

- **Official Monero Documentation:** https://getmonero.org/
- **Monero GitHub Repository:** https://github.com/monero-project/monero
- **CryptoNight Algorithm:** https://cryptonote.org/
- **Blockchain Development:** https://en.bitcoin.it/wiki/Protocol_documentation

---

## Final Notes

**Security Reminders:**
- Never share your private keys or seed phrases
- Keep premine wallets offline when not in use
- Test all modifications on a private testnet before mainnet launch
- Regularly back up your wallet files
- Document all changes you make to the source code

**Disclaimer:**
This guide is provided for educational purposes. Creating and launching a new blockchain has legal, regulatory, and technical implications. Ensure you comply with all applicable laws and regulations in your jurisdiction before launching a public blockchain.

**Version:** 1.0
**Last Updated:** November 2024
**Platform:** Linux Mint 21+